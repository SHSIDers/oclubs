{% extends "base.html" %}
{% block title %}{{ g.activity.name }}{% endblock %}
{% block content %}
{% with messages_signup = get_flashed_messages(category_filter=["signup"]) %}

<!-- Below Navbar -->
<div class="large_container">
	<!-- Side Menu -->
	<div id="sidebar" class="col-md-2">
		<div class="list-group">
			<li class="list-group-item active">Club Types</li>
			{% for typ in [('all', 'All')] + list(ClubType) %}
			<a href="{{ url_for('.allactivities', club_type=typ[0].lower(), page='1') }}" class="list-group-item {% if g.activity.club.type.name==typ[0] %}selected{% endif %}">{{ typ[1] }}</a>
			{% endfor %}
		</div>
	</div>

	<!-- Main Content -->
	<div class="col-md-10" id="intropage">
		<div class="jumbotron">
			<h1 class="title">{{ g.activity.name }}</h1>
			<p>{{ g.activity.club.name }}</p>
		</div>
		<div class="longdesc">
			<p>Time: {{ g.activity.date }}</p>
			{% if g.activity.description.raw %}
			<br>
			<p>Description:</p>
			{{ g.activity.description.formatted }}
			{% endif %}
		</div>
		{% if messages_signup %}
		<ul class="list-group" style="margin-top:0">
			{% for message in messages_signup %}
			<li class="list-group-item">{{ message }}</li>
			{% endfor %}
		</ul>
		{% endif %}

		{% if g.activity.selections %}
		{% if selection %}
		<p style="font-size: 150%;color: #f2f2f2">Your Selection:</p>
		<p style="font-size: 150%;color: #f2f2f2">{{ selection }}</p>
		{% else %}
		<p style="font-size: 150%;color: #f2f2f2">Selection:</p>
		<select name="selection" form="join_form" class="selection_bar" style="color:#f2f2f2">
			{% for choice in g.activity.selections %}
			<option value="{{ choice }}" style="color:black">{{ choice }}</option>
			{% endfor %}
		</select>
		{% endif %}
		{% endif %}

		<center>
		<div class="intro_function">
			<div class="col-sm-6">
				<a href="{{ url_for('clubblueprint.clubintro', club=g.activity.club.callsign) }}">
					<button class="btn btn-info btn-lg">Club Introduction</button>
				</a>
			</div>

			{% if is_other_act and not is_past and can_join %}
			<div class="col-sm-6">
				<form action="{{ url_for('.activity_submit', activity=g.activity.callsign) }}" method="post" id="join_form">
					<input name="_csrf_token" type="hidden" value="{{ csrf_token() }}">
					<input class="btn btn-info btn-lg" type="submit" value="Join">
				</form>
			</div>
			{% elif is_past %}
			<div class="col-sm-6">
				<a href="{{ url_for('.actpost', activity=g.activity.callsign) }}">
					<button class="btn btn-info btn-lg">Activity Post</button>
				</a>
			</div>
			{% endif %}

			{% if has_access and not is_past %}
			<div class="col-sm-6">
				<a href="{{ url_for('.actstatus', activity=g.activity.callsign) }}">
					<button class="btn btn-info btn-lg">Signup Status</button>
				</a>
			</div>
			{% endif %}

			{% if has_access and is_past %}
			<div class="col-sm-6">
				<a href="{{ url_for('.inputatten', activity=g.activity.callsign) }}">
					<button class="btn btn-info btn-lg">Input Attendance</button>
				</a>
			</div>
			<div class="col-sm-6">
				<a href="{{ url_for('.checkatten', activity=g.activity.callsign) }}">
					<button class="btn btn-info btn-lg">Check Attendance</button>
				</a>
			</div>


			<div class="col-sm-6">
				<a href="{{ url_for('.changeactpost', activity=g.activity.callsign) }}">
					<button class="btn btn-info btn-lg">Change Activity Post</button>
				</a>
			</div>
			{% endif %}
		</div>
		</center>
	</div>
</div>

<div class="clearfix"></div>

{% endwith %}
{% endblock %}