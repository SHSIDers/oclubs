{% extends "base.html" %}{% from 'macros.html' import get_messages %}
{% block title %}Attendance{% endblock %}
{% block content %}

<!-- Below Navbar -->
<div class="container">
	<h1 class="title">Attendance for {{ g.activity.name }}</h1>
	<h2 class="title_next">{{ g.activity.club.name }}</h2>
	{{ get_messages(['attendance']) }}
	<table class="table table-hover table-bordered" id="attendancetable">
		<thead>
			<tr>
				<th class="width-10">Picture</th>
				<th>Nick Name</th>
				<th>Student ID</th>
				<th>Current Attendance</th>
				<th>Change Attendance</th>
			</tr>
		</thead>
		<tbody>
			{% for member in attend %}
			<tr class="act">
				<td><img src="{{ member.picture.location_external }}" class="img-responsive width-70" alt="{{ member.nickname }}"></td>
				<td>{{ member.nickname }}</td>
				<td>{{ member.studentid }}</td>
				<td><span class="glyphicon glyphicon-check"></span></td>
				<td><label class="btn btn-primary btn-lg" for="{{ member.id }}"><input type="checkbox" name="attendance" value="{{ member.id }}" form="attendance_form" id="{{ member.id }}">&nbsp;Change Attendance</label></td>
			</tr>
			{% endfor %}
			{% for member in absent %}
			<tr class="act">
				<td><img src="{{ member.picture.location_external }}" class="img-responsive width-70" alt="{{ member.nickname }}"></td>
				<td>{{ member.nickname }}</td>
				<td>{{ member.studentid }}</td>
				<td><span class="glyphicon glyphicon-unchecked"></span></td>
				<td><label class="btn btn-primary btn-lg" for="{{ member.id }}"><input type="checkbox" name="attendance" value="{{ member.id }}" form="attendance_form" id="{{ member.id }}">&nbsp;Change Attendance</label></td>
			</tr>
			{% endfor %}
			<tr class="act" colspan="5">
				<center><form action="{{ url_for('.attendance_submit', activity=g.activity.callsign) }}" method="post" id="attendance_form">
					<input name="_csrf_token" type="hidden" value="{{ csrf_token() }}">
					<input class="btn btn-primary btn-lg" type="submit" value="Submit the Attendance">
				</form></center>
			</tr>
		</tbody>
	</table>
	<br>
	<center>
		<a class="btn btn-success downloadbtn" href="{{ url_for('.attendance_download', activity=g.activity.callsign) }}" target="_blank">Download as Excel Document</a>
	</center>
</div>

{% endblock %}
