{% extends "user/personal.html" %}{% from 'macros.html' import get_messages %}
{% block personal %}

<h2 class="white">Guiding Clubs</h2>
{{ get_messages(['joinmode', 'is_active']) }}
<div id="teacher_clubs">
	{% for club in myclubs %}
	<div class="teacher_club emptyline-lg">
		<div class="col-xs-3">
			<img src="{{ club.picture.location_external }}" class="img-responsive" alt="">
			{% if club.is_active %}
			<p class="text-center">Active</p>
			{% else %}
			<p class="text-center">Inactive</p>
			<form action="{{ url_for('clubblueprint.toactive', club=club.callsign) }}" method="post">
				<input name="_csrf_token" type="hidden" value="{{ csrf_token() }}">
				<input class="btn btn-danger btn-lg" type="submit" value="Turn to Active">
			</form>
			{% endif %}
		</div>
		<div class="col-sm-9">
			<h1>{{ club.name }}</h1>
			<h2>Members: {{ club.members_num }}<span class="float-right">Mode: {{ club.joinmode.format_name }}</span></h2>
			<p>Intro: {{ club.intro }}</p>
			<div class="clearfix"></div>
			<div class="col-sm-6">
				<a class="btn btn-primary" href="{{ url_for('clubblueprint.clubactivities', club=club.callsign) }}">Activities Status</a>
			</div>
			<div class="col-sm-6">
				<a class="btn btn-primary" href="{{ url_for('clubblueprint.hongmei_status', club=club.callsign) }}">HongMei Status</a>
			</div>
			<div class="col-sm-6">
				<a class="btn btn-primary" href="{{ url_for('clubblueprint.club', club=club.callsign) }}">Club Management</a>
			</div>
			<div class="col-sm-6">
				<form action="{{ url_for('clubblueprint.switchmode', club=club.callsign) }}" method="post">
					<input name="_csrf_token" type="hidden" value="{{ csrf_token() }}">
					<input type="hidden" class="club_callsign" value="{{ club.callsign }}">
					<input type="submit" class="btn btn-primary" value="Change Join Mode">
				</form>
			</div>
		</div>
	</div>
	<label class="clearfix"></label>
	{% endfor %}
</div>
<div class="clearfix clearfix-bordered"></div>

<center>
	<a class="btn btn-success large_button" href="{{ url_for('clubblueprint.newclub') }}">Add New Club</a>
</center>

<div class="clearfix"></div>

{% endblock %}
